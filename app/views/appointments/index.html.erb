<% provide(:title, 'Appointment') %>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">
      <h1>Appointments</h1>
    </div>
  <div>
  <div class="row-fluid">

    <div class="span3">
      <%= render 'nav_index' %>
    </div><!--/span-->

    <div class="span9">



      <table class="table table-striped">
        <tr>
          <th>Title</th>
          <% if current_gardener? %>
          <th>Phone</th>
          <% else %>
          <th>With</th>
          <% end %>

          <th>Starts at</th>
          <th></th>
          <th></th>
        </tr>

      <% @appointments.each do |appointment| %>
        <tr>
          <td><%= appointment.title %></td>
          <% if current_gardener? %>
          <td><%= number_to_phone(appointment.contact.home_phone) %></td>
          <% else %>
          <td><%= appointment.appointee.full_name %></td>
          <% end %>

          <td><%= l appointment.starts_at, format: :short  %></td>
          <td><%= link_to 'Edit', edit_appointment_path(appointment), class: 'btn btn-mini' %></td>
          <td><%= link_to 'Delete', appointment_path(appointment), confirm: 'You sure?' , method: 'delete', class: 'btn btn-mini btn-danger' %></td>
        </tr>
      <% end %>
      </table>
      <%= link_to 'Create Appointment', new_appointment_path, class: 'btn btn-primary' %>&nbsp;&nbsp;&nbsp;
      <%= link_to 'Calendar', events_path,  class: 'btn btn-secondary' %>
    </div><!--/span-->
  </div><!--/row-->
</div><!--/row-->


<%= debug(@appointments) unless (Rails.env.production? || true) %>
